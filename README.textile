h1. Thief

h2. Installation

<pre>
  gem install bundler
  bundle install
  rake thief:create_tables
</pre>

h2. Usage

<pre>
  bin/thief
  bin/server
</pre>

Then browse to http://localhost:4567

<pre>
  bin/console
</pre>

Use the interactive console

h2. Internals

<pre>
  Thief.sources << Thief::Source::SomeSource.new
  Thief.fetch
</pre>

Will go through all assigned sources (found in /thief/sources/*.rb) and call their fetch method.
Each Source has its own table for "Person" objects (dapi_people, dapi_wikipedia) and will store all the information in there

<pre>
  Thief.integrate
</pre>

Will go through all assigned sources (same as above) and call their integrate method.
Each Integrator will convert its own Person-schema to the integrated schema (Thief::DAPI::Person -> Thief::Person)

That's assignment 2.

<pre>
  Thief::Person.all.each { |person| puts person.name }
</pre>

prints out the stored and integrated people.

You can copy the dapi.rb and dapi-folder to create a new source with ETL, Integrator and Person objects.

Special download mechanism in Thief::Wikipedia::ETL loads the necessary txt file which contains the person data if the file doesn't exist.

<pre>
  Thief::Wikipedia:ETL.download_file!
</pre>

This method is called by the fetch method if the necessary file containing the person data doesn't exist. It will download the zip file, unzip it and rename and move the contained text file to the
wikipedia directory.

h2. Special

Thief::ETL now has inheritable mechanisms to download and extract files as well as store them in their specific temporary directories.

Thief::Integrator now has inheritable mechanisms for defining a mapping from a source specific schema to the global schema (experimental and probably useless)